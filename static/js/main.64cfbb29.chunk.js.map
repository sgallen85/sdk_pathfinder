{"version":3,"sources":["mp/GetSDK.ts","app/Frame.tsx","app/reusables/accordion/Accordion.tsx","app/reusables/accordion/AccordionItem.tsx","app/reusables/icon/Icon.tsx","app/reusables/accordion/AccordionGroup.tsx","app/ui/Menu.tsx","app/ui/MenuButton.tsx","app/utils.ts","app/Pathfinder.ts","app/Translator.ts","app/sdk-components/PathRenderer.ts","app/sdk-components/CameraController.ts","app/sdk-components/index.ts","app/sweepAliases.ts","app/ui/overlay/ScrubBar.tsx","app/ui/overlay/ControlsOverlay.tsx","app/ui/overlay/FlyModeButton.tsx","app/App.tsx","index.tsx"],"names":["GetSDK","elementId","applicationKey","Promise","resolve","reject","intervalId","setInterval","a","iframe","HTMLIFrameElement","document","getElementById","contentWindow","sdkWindow","MP_SDK","clearInterval","sdk","connect","Frame","this","props","src","id","customRef","children","className","title","allowFullScreen","frameBorder","ref","Component","Accordion","header","ACCORDION_ITEM_HEIGHT","AccordionItem","body","selected","onClick","classNames","style","height","Icon","icon","classes","classArray","Array","isArray","AccordionGroup","state","expanded","showChildren","setState","setTimeout","showNumber","numChildren","length","hasChildren","contentHeight","Menu","sweepGroups","sweepData","sweepAlias","groups","s","sid","floor","push","onChange","selectedSweepId","name","getGroups","floors","selectedFloor","undefined","Object","entries","sweeps","items","renderItem","onClose","type","renderGroups","MenuButton","text","distance","p1","p2","Math","sqrt","x","y","z","sweepIdToPoint","position","Pathfinder","VERT_THRESHOLD","HORZ_THRESHOLD","graph","path","sweepPositions","forEach","sweep","createGraph","i","sweep_a","adj","neighbor_sids","neighbors","j","sweep_b_sid","d","i_sid","j_sid","a_sid","b_sid","console","error","ht","visited","cost","parent","debug_n","min_sid","encountered_sids","keys","dist","penalty","heuristic","log","reverse","Translator","lang","xhr","url","key","XMLHttpRequest","query","open","send","status","responseText","texts","json","parse","raw","obj","JSON","transTexts","translations","PathRenderer","material","inputs","visible","radius","color","opacity","heightOffset","stepMultiplier","context","outputs","curve","onInit","THREE","three","every","p","points","map","Vector3","spline","CatmullRomCurve3","extrudeSettings","steps","bevelEnabled","extrudePath","arcShape","Shape","absarc","PI","extrudeGeometry","ExtrudeGeometry","MeshBasicMaterial","transparent","pathMesh","Mesh","objectRoot","onEvent","_type","_data","onInputsUpdated","_previous","onTick","_tickDelta","onDestroy","dispose","pathRendererType","PathRendererFactory","CameraController","u","up","timeReference","Date","now","uReference","speed","verticalOffset","enabled","changeUCallback","camera","PerspectiveCamera","getLength","deltaTime","min","max","getPoseAt","rotation","setCamera","uPast","uFuture","getPointAt","positionPast","positionFuture","matrix","Matrix4","lookAt","Euler","setFromRotationMatrix","copy","updateProjectionMatrix","cameraControllerType","CameraControllerFactory","initComponents","all","Scene","register","sweepAliases","ScrubBar","onMouseDown","onMouseUp","step","value","ControlsOverlay","playing","onPlay","onPause","onExit","setU","e","parseFloat","target","FlyModeButton","defaultUrlParams","m","qs","hr","brand","help","play","App","pathNode","pathfinder","flyNode","camCon","onOptionSelect","toggleFlyMode","flyModeEnabled","exitFly","initFly","stop","createNode","addComponent","flyU","cam","bind","start","Mode","moveTo","DOLLHOUSE","playFly","INSIDE","flyModePlaying","pauseFly","setFlyU","toggleMenu","menuEnabled","queryString","handleUrlParams","process","params","URLSearchParams","window","location","search","get","k","v","has","append","toString","Model","getData","then","data","mattertags","label","description","anchorPosition","stemVector","Mattertag","add","Sweep","subscribe","onCollectionUpdated","collection","sweepMap","current","currentSweep","currSweepId","translateMattertags","_prevProps","prevState","handlePath","findShortestPath","Trans","testQuery","mattertagData","media","translate","newLabel","newDescription","editBillboard","checkUsage","ReactDOM","render","StrictMode"],"mappings":"oeAUaA,EAAS,SAASC,EAAuCC,GACpE,OAAO,IAAIC,SAAQ,SAASC,EAASC,GACnC,IAmBMC,EAAaC,YAnBF,uCAAG,gCAAAC,EAAA,yDACdC,EAAS,OAEXA,EADER,aAAqBS,kBACdT,EAGAU,SAASC,eAAeX,IANjB,gCAWSQ,EAAOI,cAXhB,QAWVC,EAXU,OAWsDC,UAEpEC,cAAcV,GACRW,EAAMH,EAAUI,QAAQT,EAAQP,EAxB5B,OAyBVE,EAAQa,IAfM,2CAAH,qDAmB2B,S,qBCnB3BE,E,4JAEnB,WAAU,IAAD,EACkCC,KAAKC,MAAtCC,EADD,EACCA,IAAKC,EADN,EACMA,GAAIC,EADV,EACUA,UAAWC,EADrB,EACqBA,SAE5B,OACE,sBAAKC,UAAU,QAAf,UACE,wBACEH,GAAIA,GAAM,WACVG,UAAU,QACVJ,IAAKA,EACLK,MAAO,WACPC,iBAAiB,EACjBC,YAAY,IACZC,IAAKN,IAENC,S,GAhB0BM,a,QCLdC,G,wKAEnB,WAAiB,IAAD,EACeZ,KAAKC,MAA1BY,EADM,EACNA,OAAQR,EADF,EACEA,SAEhB,OACE,sBAAKC,UAAU,YAAf,UACIO,GACA,qBAAKP,UAAU,+BAAf,SAA+CO,IAEjD,qBAAKP,UAAU,mBAAf,SACGD,W,GAX4BM,c,gBCI1BG,G,YAAwB,QAEhBC,E,4JACnB,WAAiB,IAAD,EAC8Bf,KAAKC,MAAzCY,EADM,EACNA,OAAQG,EADF,EACEA,KAAMC,EADR,EACQA,SAAUC,EADlB,EACkBA,QAChC,OACE,qBACEZ,UAAWa,IAAW,iBAAkB,CAAC,WAAcF,IACvDC,QAASA,EACTE,MAAO,CAAEC,OAAQP,GAHnB,SAKE,sBAAKR,UAAU,yBAAf,UACE,qBAAKA,UAAU,wBAAf,SAAwCO,IACxC,qBAAKP,UAAU,sBAAf,SAAsCU,a,GAXLL,a,QCJtBW,G,kKACnB,WAAiB,IAAD,EACYtB,KAAKC,MAAvBsB,EADM,EACNA,KAAMC,EADA,EACAA,QACVC,EAAuB,GAS3B,OARID,IAEAC,EADEC,MAAMC,QAAQH,GACHA,EAEA,CAACA,IAKhB,sBAAMlB,UAAWa,IAAU,WAAV,GAAW,OAAQ,QAAUI,GAA7B,mBAAsCE,W,GAb3Bd,cCQbiB,E,kDACnB,WAAY3B,GAAa,IAAD,uBACtB,cAAMA,IAQAiB,QAAU,WAAO,IAAD,EACa,EAAKW,MAAhCC,EADc,EACdA,SAAUC,EADI,EACJA,aAClB,EAAKC,SAAS,CACZF,UAAWA,IACV,kBAAMG,YAAW,kBAAM,EAAKD,SAAS,CAACD,cAAeA,MAAgBA,EAAe,IAAM,OAbvE,IAEdD,EAAa,EAAK7B,MAAlB6B,SAFc,OAGtB,EAAKD,MAAQ,CACXC,WAAYA,EACZC,eAAgBD,GALI,E,0CAgBxB,WAAiB,IAAD,EAC2B9B,KAAKC,MAAtCI,EADM,EACNA,SAAUQ,EADJ,EACIA,OAAQqB,EADZ,EACYA,WAClBJ,EAAa9B,KAAK6B,MAAlBC,SAEJK,EAAc,EACd9B,IAEA8B,EADET,MAAMC,QAAQtB,GACFA,EAAS+B,OAER,GAGnB,IAAMC,EAAcF,EAAc,EAC5BG,EAAgBR,GAAYO,EAAZ,eAAkCF,EAAlC,YAAiDrB,EAAjD,KAA4E,IAElG,OACE,sBAAKR,UAAWa,IAAW,4BAA6B,CAAC,WAAcW,IAAvE,UACE,sBACExB,UAAU,qCACVY,QAASlB,KAAKkB,QAFhB,UAIG,GAAKL,GAAUwB,GAAeH,EAAf,YAAiCC,EAAjC,KAAkD,IAClE,cAAC,EAAD,CAAMZ,KAAK,oBAEb,qBACEjB,UAAWa,IAAW,kBAAmB,CACvC,WAAcW,IAEhBV,MAAO,CAAEC,OAAQiB,GAJnB,SAMGH,EAAc,GAAK9B,W,GA/CcM,aCYvB4B,E,kDAEnB,WAAYtC,GAAa,IAAD,8BACtB,cAAMA,IACD4B,MAAQ,CACXW,YAAa,IAHO,E,6CAOxB,WAAqB,IAAD,IACgBxC,KAAKC,MAA/BwC,EADU,EACVA,UAAWC,EADD,EACCA,WACbC,EAAsB,GAFV,cAGFF,GAHE,IAGlB,2BAA2B,CAAC,IAAjBG,EAAgB,QACzB,IAAIF,GAAgBE,EAAEC,OAAOH,EAA7B,CACA,IAAMI,EAAQ,GAAKF,EAAEE,MACfA,KAASH,IACbA,EAAOG,GAAS,IAElBH,EAAOG,GAAOC,KAAKH,KATH,8BAWlB,OAAOD,I,wBAGT,SAAmBC,GAAqB,IAAD,EACa5C,KAAKC,MAA/C+C,EAD6B,EAC7BA,SAAUC,EADmB,EACnBA,gBAAiBP,EADE,EACFA,WAC3BG,EAAQD,EAARC,IACFK,EAAOR,EAAaA,EAAWG,GAAOA,EAC5C,OACE,cAAC,EAAD,CACEhC,OAAQqC,EACRhC,QAAS,kBAAM8B,EAASH,IACxB5B,SAAU4B,IAAQI,GACbJ,K,0BASX,WAME,IANsB,IACdI,EAAoBjD,KAAKC,MAAzBgD,gBACFT,EAAcxC,KAAKmD,YACnBC,EAAc,GAChBC,OAAgBC,EAEpB,MAA8BC,OAAOC,QAAQhB,GAA7C,eAA2D,CAAC,IAAD,sBAA/CM,EAA+C,KAAxCW,EAAwC,KACnDX,KAASM,IAASA,EAAON,GAAS,IAExC,IAHyD,EAGnDY,EAAQ,GAH2C,cAIzCD,GAJyC,IAIzD,2BAAwB,CAAC,IAAdb,EAAa,QACtBc,EAAMX,KAAK/C,KAAK2D,WAAWf,IACvBA,EAAEC,MAAQI,IACZI,EAAgBT,EAAEE,QAPmC,8BAWzDM,EAAOL,KACL,cAAC,EAAD,CACElC,OAAM,gBAAWiC,GACjBhB,WAAYuB,GAAiB,GAAGA,IAAkBP,EAClDZ,YAAY,EAHd,SAMGwB,GAFIZ,IAMX,OAAOM,I,oBAGT,WAAiB,IACPQ,EAAY5D,KAAKC,MAAjB2D,QACR,OACE,sBAAKtD,UAAU,OAAf,UACE,sBAAKA,UAAU,cAAf,UACE,qBAAKA,UAAU,+BAAf,oBACEsD,GACA,wBAAQC,KAAK,SAASvD,UAAU,oBAAoBY,QAAS0C,EAA7D,SACE,cAAC,EAAD,CAAMrC,KAAK,eAIjB,cAAC,EAAD,UACGvB,KAAK8D,wB,GArFkBnD,aCnBboD,G,kKAEnB,WAAiB,IAAD,EACY/D,KAAKC,MAAvB+D,EADM,EACNA,KAAM9C,EADA,EACAA,QACd,OACE,qBAAKZ,UAAU,wBAAf,SACE,wBAAQuD,KAAK,SAASvD,UAAWa,IAAW,cAAe,CAAC,gBAAiB6C,IAAQ9C,QAASA,EAA9F,SACG8C,GACC,cAAC,EAAD,CAAMzC,KAAK,yB,GARiBZ,cCEjC,SAASsD,EAASC,EAAaC,GACpC,OAAOC,KAAKC,KAAK,SAACH,EAAGI,EAAIH,EAAGG,EAAI,GAAf,SAAoBJ,EAAGK,EAAIJ,EAAGI,EAAI,GAAlC,SAAuCL,EAAGM,EAAIL,EAAGK,EAAI,IAGjE,SAASC,EAAetE,EAAYsC,GACzC,OAAOA,EAAUtC,GAAIuE,S,ICOFC,E,WAUnB,WAAYlC,GAA+B,IAAD,gCARlCmC,eAAiB,GAQiB,KAPlCC,eAAiB,GAOiB,KALlCC,MAAoB,GAKc,KAJnCC,KAAkB,GAIiB,KAFlCC,eAAiC,GAIvCvC,EAAUwC,SAAQ,SAAAC,GAAK,OAAI,EAAKF,eAAeE,EAAMrC,KAAOqC,EAAMR,YAClE1E,KAAKmF,YAAY1C,G,+CAOnB,SAAoBgB,GAElB,IADA,IAAMqB,EAAoB,GACjBM,EAAI,EAAGA,EAAI3B,EAAOrB,OAAQgD,IAAK,CAItC,IAHA,IAAMC,EAAU5B,EAAO2B,GACjBE,EAAqB,GACrBC,EAAgBF,EAAQG,UACrBC,EAAI,EAAGA,EAAIF,EAAcnD,OAAQqD,IAAK,CAC7C,IAAMC,EAAcH,EAAcE,GAC5BE,EAAI1B,EAASoB,EAAQX,SAAU1E,KAAKgF,eAAeU,IACzDJ,EAAII,GAAeC,EAErBb,EAAMO,EAAQxC,KAAOyC,EAEvBtF,KAAK8E,MAAQA,I,uBAMf,SAAkBc,EAAeC,GAAwB,IAC/Cb,EAAmBhF,KAAnBgF,eACR,OAAOf,EAASe,EAAeY,GAAQZ,EAAea,M,qBAMxD,SAAgBD,EAAeC,GAAwB,IAC7Cb,EAAmBhF,KAAnBgF,eACR,OAAO,UAAEA,EAAeY,GAAOrB,EAAIS,EAAea,GAAOtB,GAAKvE,KAAK4E,eAAmB,IAChF,SAACI,EAAeY,GAAOtB,EAAIU,EAAea,GAAOvB,EAAM,GAAvD,SAA4DU,EAAeY,GAAOpB,EAAIQ,EAAea,GAAOrB,EAAM,IAAKxE,KAAK6E,iB,qEASpI,WAA8BiB,EAAeC,GAA7C,yGAKuBzC,KAHbwB,EAAU9E,KAAV8E,OAGEgB,SAAyCxC,IAAjBwB,EAAMiB,GAL1C,uBAMIC,QAAQC,MAAM,4BANlB,2BAUQC,EAAU,IACbJ,GAAS,CAAEK,SAAS,EAAOlC,SAAU,EAAGmC,KAAM,EAAGC,OAAQ,MAGxDC,EAAU,EAdhB,OAsBI,IALAA,GAAW,EAGPC,OApBR,EAqBUC,EAAmBjD,OAAOkD,KAAKP,GAC5Bd,EAAI,EAAGA,EAAIoB,EAAiBpE,OAAQgD,IACrCvC,EAAM2D,EAAiBpB,IACxBc,EAAGrD,GAAKsD,eAAwB7C,IAAZiD,GAAyBL,EAAGrD,GAAKuD,KAAOF,EAAGK,GAASH,QAC3EG,EAAU1D,GAzBlB,QA4BoBS,IAAZiD,EA5BR,wBA6BMP,QAAQC,MAAM,kDA7BpB,8BAiCQM,IAAYR,EAjCpB,qDAuCI,IAFAG,EAAGK,GAASJ,SAAU,EAChBZ,EAAgBhC,OAAOkD,KAAK3B,EAAMyB,IAC/BnB,EAAI,EAAGA,EAAIG,EAAcnD,OAAQgD,IAClCvC,EAAM0C,EAAcH,GACpBsB,EAAOR,EAAGK,GAAStC,SAAWa,EAAMyB,GAAS1D,GAC7CuD,EAAOM,EAAO1G,KAAK2G,QAAQJ,EAAS1D,GAAO7C,KAAK4G,UAAU/D,EAAKkD,GACjElD,KAAOqD,GACJA,EAAGrD,GAAKsD,SAAYD,EAAGrD,GAAKuD,KAAOA,IACtCF,EAAGrD,GAAKwD,OAASE,EACjBL,EAAGrD,GAAKoB,SAAWyC,EACnBR,EAAGrD,GAAKuD,KAAOA,GAGjBF,EAAGrD,GAAO,CAAEsD,SAAS,EAAOlC,SAAUyC,EAAMN,KAAMA,EAAMC,OAAQE,GAlDxE,uBA2DE,IALAP,QAAQa,IAAR,+BAAoCP,IAI9BvB,EAAiB,CADnBlC,EAAMkD,GAEgB,OAAnBG,EAAGrD,GAAKwD,QACbxD,EAAMqD,EAAGrD,GAAKwD,OACdtB,EAAKhC,KAAKF,GA7Dd,OA+DEkC,EAAK+B,UA/DP,kBAgES/B,GAhET,iD,gECnFmBgC,E,WAMnB,WAAYC,GAAe,yBAJnBC,SAIkB,OAHlBC,IAAc,0CAGI,KAFlBC,IAAc,0CAGpBnH,KAAKiH,IAAM,IAAIG,eACfpH,KAAKkH,KAAL,oBAAyBlH,KAAKmH,IAA9B,wBAAiDH,G,6CAGnD,WAA6B,IACnBC,EAAQjH,KAARiH,IAEJI,EAAQrH,KAAKkH,IAAL,SACZD,EAAIK,KAAK,MAAOD,GAAO,GACvBJ,EAAIM,OACJ,IAAIC,EAASP,EAAIO,OACjB,OAAe,IAAXA,GAAiBA,GAAU,KAAOA,EAAS,M,wBAOjD,WAA2B,IACjBP,EAAQjH,KAARiH,IACRA,EAAIK,KAAK,MAAT,uDAAgEtH,KAAKmH,MAAO,GAC5EF,EAAIM,OACJvB,QAAQa,IAAI,cAAeI,EAAIQ,gB,uBAGjC,SAAiBC,GAIf,IAJ2C,IACnCT,EAAQjH,KAARiH,IAEJI,EAAQrH,KAAKkH,IACR9B,EAAE,EAAGA,EAAEsC,EAAMtF,OAAQgD,IAC5BiC,GAAK,gBAAaK,EAAMtC,IAE1B6B,EAAIK,KAAK,MAAOD,GAAO,GACvBJ,EAAIM,OACJ,IAAIC,EAASP,EAAIO,OACjB,GAAe,IAAXA,GAAiBA,GAAU,KAAOA,EAAS,IAAM,CACnD,IAAMG,EAAOV,EAAIQ,aACjB,OAAOzH,KAAK4H,MAAMD,GAElB,OAAOD,I,mBAOX,SAAcG,GAGZ,IAFA,IAAMC,EAAMC,KAAKH,MAAMC,GACjBG,EAAa,GACV5C,EAAE,EAAGA,EAAE0C,EAAIG,aAAa7F,OAAQgD,IACvC4C,EAAWjF,KAAK+E,EAAIG,aAAa7C,GAAGpB,MAEtC,OAAOgE,M,KCxCLE,E,iDAEIC,c,OAEAC,OAA6B,CACnCC,SAAS,EACTtD,KAAM,GACNuD,OAAQ,IACRC,MAAO,MACPC,QAAS,GACTC,cAAe,IACfC,eAAgB,G,KAGVC,a,OAEAC,QAAU,CAChBC,MAAO,KACP5E,SAAU,G,KAGL6E,O,sBAAS,wDAAA1J,EAAA,yDAER2J,EAAQ,EAAKJ,QAAQK,MAFb,EASa,EAAKZ,OALxBrD,EAJM,EAINA,KACAuD,EALM,EAKNA,OACAG,EANM,EAMNA,aACAD,EAPM,EAONA,QACAD,EARM,EAQNA,MACAG,EATM,EASNA,iBAGJ3D,EAAK3C,OAAS,IAAM2C,EAAKkE,OAAM,SAAAC,GAAC,QAAMA,KAZ5B,iDAcVvD,EAAI,EACFwD,EAASpE,EAAKqE,KAAI,SAACF,EAAG9D,GAI1B,OAHIA,EAAI,IACNO,GAAK1B,EAASc,EAAKK,EAAE,GAAI8D,IAEpB,IAAIH,EAAMM,QAAQH,EAAE5E,EAAG4E,EAAE3E,EAAEkE,EAAcS,EAAE1E,MAE9C8E,EAAS,IAAIP,EAAMQ,iBAAiBJ,GAEpCK,EAAkB,CACpBC,MAAOf,EAAiB3D,EAAK3C,OAC7BsH,cAAc,EACdC,YAAaL,GAIXM,GAAW,IAAIb,EAAMc,OAAQC,OAAO,EAAG,EAAGxB,EAAQ,EAAa,EAAVlE,KAAK2F,IAAQ,GAElEC,EAAkB,IAAIjB,EAAMkB,gBAAiBL,EAAUJ,GAE7D,EAAKrB,SAAW,IAAIY,EAAMmB,kBAAkB,CACxC3B,MAAOA,EACP4B,aAAa,EACb3B,QAASA,IAGP4B,EAAW,IAAIrB,EAAMsB,KAAKL,EAAiB,EAAK7B,UAEtD,EAAKS,QAAQ0B,WAAaF,EAC1B,EAAKxB,QAAQC,MAAQS,EACrB,EAAKV,QAAQ3E,SAAW0B,EA5CV,4C,KA+CT4E,QAAU,SAASC,EAAYC,K,KAG/BC,gBAAkB,SAASC,K,KAG3BC,OAAS,SAASC,K,KAGlBC,UAAY,WAAO,IAAD,EACvB,YAAK3C,gBAAL,SAAe4C,YAINC,EAAmB,6BACzB,SAASC,IACd,OAAO,IAAI/C,E,IClFPgD,E,4DAEIC,EAAY,E,KACZ/I,OAAiB,E,KACjBgJ,Q,OACAC,cAAwBC,KAAKC,M,KAC7BC,WAAqB,E,KAErBpD,OAAiC,CACvCS,MAAO,KACP4C,MAAO,IACPC,eAAgB,EAChBC,SAAS,EACTC,gBAAiB,SAACT,GAAD,OAAO,O,KAGlBvC,QAAU,CAChBiD,OAAQ,M,KAGFlD,a,OA2CDG,O,sBAAS,gCAAA1J,EAAA,sDACNyJ,EAAU,EAAKT,OAAfS,MACFE,EAAQ,EAAKJ,QAAQK,MAErB6C,EAAS,IAAI9C,EAAM+C,kBAAmB,GAAI,MAAO,EAAG,KAC1D,EAAKlD,QAAQiD,OAASA,EACtB,EAAKzJ,OAASyG,EAAMkD,YAAc,EAClC,EAAKX,GAAK,IAAIrC,EAAMM,QAAQ,EAAG,EAAG,GAPpB,2C,KAUTkB,QAAU,SAASC,EAAYC,K,KAG/BC,gBAAkB,SAACC,GACJ,EAAKvC,OAAjBuD,QAEN,EAAKN,cAAgBC,KAAKC,MAE1B,EAAKC,WAAa,EAAKL,G,KAIpBP,O,uCAAS,WAAOC,GAAP,2BAAAzL,EAAA,wDACa,EAAKgJ,OAAxBqD,EADM,EACNA,MADM,EACCE,UAEPK,GAAaV,KAAKC,MAAQ,EAAKF,eAAe,IAChDF,EAAI,EAAKK,WAAaC,EAAQO,EAAY,EAAK5J,OACnD+I,EAAI/G,KAAK6H,IAAI7H,KAAK8H,IAAIf,EAAG,GAAI,GAHlB,EAIoB,EAAKgB,UAAUhB,GAAtCzG,EAJG,EAIHA,SAAU0H,EAJP,EAIOA,SAClB,EAAKC,UAAU3H,EAAU0H,GACzB,EAAKhE,OAAOwD,gBAAgBT,GAC5B,EAAKA,EAAIA,GATG,2C,2DAaTL,UAAY,a,6CAzEnB,SAAkBK,GAAkD,IAAD,EACxBnL,KAAKoI,OAAtCS,EADyD,EACzDA,MAAO4C,EADkD,EAClDA,MAAOC,EAD2C,EAC3CA,eAChB3C,EAAQ/I,KAAK2I,QAAQK,MAErBsD,EAAQlI,KAAK8H,IAAIf,EAAI,GAAMM,EAAQzL,KAAKoC,OAAQ,GAChDmK,EAAUnI,KAAK6H,IAAId,EAAIM,EAAQzL,KAAKoC,OAAQ,GAC5CsC,EAAWmE,EAAM2D,WAAWrB,GAClCzG,EAASH,GAAKmH,EACd,IAAMe,EAAe5D,EAAM2D,WAAWF,GAChCI,EAAiB7D,EAAM2D,WAAWD,GAElCI,GAAS,IAAI5D,EAAM6D,SAAUC,OAAOJ,EAAcC,EAAgB1M,KAAKoL,IAE7E,MAAO,CAAE1G,WAAU0H,UADF,IAAIrD,EAAM+D,OAAQC,sBAAsBJ,EAAQ,U,uBAOnE,SAAkBjI,EAAmB0H,GAAkB,IAC7CP,EAAW7L,KAAK4I,QAAhBiD,OACRA,EAAOnH,SAASsI,KAAKtI,GACrBmH,EAAOO,SAASY,KAAKZ,GACrBP,EAAOoB,2B,kBAMT,SAAY9B,GAAY,IAAD,EACUnL,KAAKmM,UAAUhB,GAAtCzG,EADa,EACbA,SAAU0H,EADG,EACHA,SAClBpM,KAAKqM,UAAU3H,EAAU0H,GACzBpM,KAAKoI,OAAOwD,gBAAgBT,GAC5BnL,KAAKwL,WAAaL,M,KA4CT+B,EAAuB,iCAC7B,SAASC,IACd,OAAO,IAAIjC,ECpHN,IAAMkC,EAAc,uCAAG,WAAOvN,GAAP,SAAAT,EAAA,sEACtBL,QAAQsO,IAAI,CAChBxN,EAAIyN,MAAMC,SAASvC,EAAkBC,GACrCpL,EAAIyN,MAAMC,SAASL,EAAsBC,KAHf,2CAAH,sDCQdK,EAAoB,CAC/B,YAb+B,CAC/B,mCAAoC,aACpC,iCAAoC,MACpC,mCAAoC,MACpC,iCAAoC,MACpC,mCAAoC,0CACpC,mCAAoC,MACpC,mCAAoC,MACpC,iCAAoC,0CACpC,mCAAoC,uCCDjBC,G,kKAEnB,WAAiB,IAAD,EAEkCzN,KAAKC,MAA7CyN,EAFM,EAENA,YAAaC,EAFP,EAEOA,UAAW3K,EAFlB,EAEkBA,SAAUmI,EAF5B,EAE4BA,EAI1C,OACE,qBAAK7K,UAAU,YAAf,SACE,uBAAOA,UAAU,YAAYuD,KAAK,QAAQoI,IAAI,IAAIC,IAAI,IAAI0B,KAAK,QAAQC,MAAO1C,EAC5EuC,YAAaA,EACbC,UAAWA,EACX3K,SAAUA,U,GAbkBrC,cCCjBmN,G,kKAEnB,WAAiB,IAAD,EACwC9N,KAAKC,MAAnD8N,EADM,EACNA,QAASC,EADH,EACGA,OAAQC,EADX,EACWA,QAASC,EADpB,EACoBA,OAAQC,EAD5B,EAC4BA,KAAMhD,EADlC,EACkCA,EAEhD,OACE,qBAAK7K,UAAU,6BAAf,SACE,sBAAKA,UAAU,mBAAf,UACE,cAAC,EAAD,CACEoN,YAAaO,EACbN,UAAWK,EACXhL,SAAU,SAACoL,GAAD,OAAOD,EAAKE,WAAWD,EAAEE,OAAOT,SAC1C1C,EAAGA,IAEL,sBAAK7K,UAAU,2BAAf,UACE,wBAAQuD,KAAK,SACXvD,UAAU,6BACVY,QAAS6M,EAAUE,EAAUD,EAF/B,SAIE,cAAC,EAAD,CAAMzM,KAAMwM,EAAU,oBAAsB,mBAAoBvM,QAAQ,wBAE1E,wBAAQqC,KAAK,SAASvD,UAAU,6BAA6BY,QAASgN,EAAtE,SACE,cAAC,EAAD,CAAM3M,KAAK,wB,GAtBoBZ,cCPxB4N,G,kKACnB,WAAiB,IACPrN,EAAYlB,KAAKC,MAAjBiB,QACR,OACE,qBAAKZ,UAAU,2BAAf,SACE,wBAAQA,UAAU,iBAAiBY,QAASA,EAA5C,4B,GALmCP,cC0BrC6N,EAAwB,CAC5BC,EAAG,cACH3P,eAAgB,4BAChByB,MAAO,IACPmO,GAAI,IACJC,GAAI,IACJC,MAAO,IACPC,KAAM,IACNC,KAAM,KAQaC,E,kDAcnB,WAAY9O,GAAa,IAAD,uBACtB,cAAMA,IAbAC,SAYgB,IAXhB8G,KAAsB,KAWN,EAVhBnH,SAUgB,IARhBmP,cAQgB,IAPhBC,gBAOgB,IALhBvM,gBAKgB,IAHhBwM,aAGgB,IAFhBC,YAEgB,IAsGhBC,eAAiB,SAACjP,GACxB,EAAK6B,SAAS,CACZiB,gBAAiB9C,KAxGG,EAkIhBkP,cAlIgB,sBAkIA,4BAAAjQ,EAAA,2DACdkQ,EAAmB,EAAKzN,MAAxByN,gBADc,gCAGd,EAAKC,UAHS,6CAKd,EAAKC,UALS,OAOtB,EAAKxN,SAAS,CAACsN,gBAAiBA,IAPV,2CAlIA,EA4IhBE,QA5IgB,sBA4IN,wCAAApQ,EAAA,0EACRS,EADQ,EACRA,IACAkF,EAAS,EAAKlD,MAAdkD,MAEJlF,IAAOkF,EAJK,wBAKV,EAAKmK,SAAS,EAAKA,QAAQO,OALjB,SAMO5P,EAAIyN,MAAMoC,aANjB,cAMd,EAAKR,QANS,OAOd,EAAKC,OAAS,EAAKD,QAAQS,aAAazC,EAAsB,CAC5DtB,gBAAiB,SAACT,GAAD,OAAe,EAAKnJ,SAAS,CAAC4N,KAAMzE,OAEjD0E,EAAM,EAAKX,QAAQS,aAAa,YAAa,CACjDhE,SAAS,IAEX,EAAKwD,OAAOW,KAAK,QAAS/K,EAAM,SAChC8K,EAAIC,KAAK,SAAU,EAAKX,OAAQ,UAChC,EAAKD,QAAQa,QAfC,EAkBiB,EAAKZ,OAAOhD,UAAU,GAA7CzH,EAlBM,EAkBNA,SAAU0H,EAlBJ,EAkBIA,SAlBJ,UAmBRvM,EAAImQ,KAAKC,OAAOpQ,EAAImQ,KAAKA,KAAKE,UAAW,CAC7CxL,WACA0H,SAAU,CAAC9H,EAAc,IAAX8H,EAAS9H,EAAMF,KAAK2F,GAAIxF,EAAc,IAAX6H,EAAS7H,EAAMH,KAAK2F,MArBjD,QAyBd,EAAK/H,SAAS,CAAC4N,KAAM,IACrB,EAAKO,UA1BS,4CA5IM,EA0KhBZ,QA1KgB,sBA0KN,gCAAAnQ,EAAA,uEACRS,EADQ,EACRA,KAAKqP,EADG,EACHA,UACAA,EAAQO,OACjB5P,GAAKA,EAAImQ,KAAKC,OAAOpQ,EAAImQ,KAAKA,KAAKI,QACvC,EAAKpO,SAAS,CAAEqO,gBAAgB,IAJhB,2CA1KM,EAiLhBF,QAAU,WACZ,EAAKhB,SAAQ,EAAKA,OAAO/G,OAAOuD,SAAU,GAC9C,EAAK3J,SAAS,CAAEqO,gBAAgB,KAnLV,EAqLhBC,SAAW,WACb,EAAKnB,SAAQ,EAAKA,OAAO/G,OAAOuD,SAAU,GAC9C,EAAK3J,SAAS,CAAEqO,gBAAgB,KAvLV,EAyLhBE,QAAU,SAACpF,GAAmB,EAAKgE,QAAQ,EAAKA,OAAOhB,KAAKhD,IAzL5C,EA2LhBqF,WAAa,WACnB,EAAKxO,SAAS,CACZyO,aAAc,EAAK5O,MAAM4O,eA3L3B,IAAMC,EAAc,EAAKC,kBAFH,OAGtB,EAAKzQ,IAAL,UAAc0Q,kBAAd,iCAA6DF,GAE7D,EAAK7O,MAAQ,CACXY,UAAW,GACXgO,aAAa,EACbnB,gBAAgB,EAChBM,KAAM,EACNS,gBAAgB,GAVI,E,mDAkBxB,WACE,IAAMQ,EAAS,IAAIC,gBAAgBC,OAAOC,SAASC,QACnDjR,KAAKgH,KAAO6J,EAAOK,IAAI,QACvB,cAAqB3N,OAAOC,QAAQgL,GAApC,eAAuD,CAAC,IAAD,sBAA3C2C,EAA2C,KAAxCC,EAAwC,KAChDP,EAAOQ,IAAIF,IACdN,EAAOS,OAAOH,EAAG,GAAGC,GAGxB,OAAOP,EAAOU,a,sEAKhB,yGAEmB3S,EAAO,WAAY4P,EAAiB1P,gBAFvD,cAEEkB,KAAKH,IAFP,gBAGQuN,EAAepN,KAAKH,KAH5B,uBAQQG,KAAKH,IAAI2R,MAAMC,UAAUC,KAAzB,uCAA+B,WAAOC,GAAP,iBAAAvS,EAAA,yDAClB,gBAAbuS,EAAK9O,IAD0B,uBAE3B+O,EAAa,IACR7O,KACT,CACE8O,MAAO,8BACPC,YAAa,8oBASbC,eAAgB,CAACzN,EAAG,MAAOC,EAAG,KAAK,IAAKC,EAAG,MAC3CwN,WAAY,CAAE1N,EAAG,EAAGC,EAAG,EAAGC,EAAG,KAhBA,mBAmB3B,EAAK3E,WAnBsB,aAmB3B,EAAUoS,UAAUC,IAAIN,GAnBG,2CAA/B,kCAAA5R,KAAA,gBARR,OAgCEA,KAAKH,IAAI2R,MAAMC,UAAUC,MAAM,SAACC,GAC9B,IAAMlP,EAAYkP,EAAKlO,OACvB,EAAKwL,WAAa,IAAItK,EAAWlC,GACjC,EAAKT,SAAS,CACZS,UAAWA,IAEb,EAAKC,WAAa8K,EAAamE,EAAK9O,QAGtC7C,KAAKH,IAAIsS,MAAMR,KAAKS,UAAU,CAC5BC,oBAAqB,SAACC,GACpB,EAAKtQ,SAAS,CACZuQ,SAAUD,OAKhBtS,KAAKH,IAAIsS,MAAMK,QAAQJ,WAAU,SAACK,GAC5BA,EAAa5P,KAAKmD,QAAQa,IAAI4L,EAAa5P,IAAK4P,EAAa/N,UACjE,EAAK1C,SAAS,CACZ0Q,YAAaD,EAAa5P,SAK9B7C,KAAK2S,sBAzDP,iD,sFA4DA,SAA0BC,EAAiBC,GAAsB,IAAD,EACrB7S,KAAK6B,MAAtC6Q,EADsD,EACtDA,YAAazP,EADyC,EACzCA,iBAGpByP,IAAgBG,EAAUH,aAC3BzP,IAAoB4P,EAAU5P,kBAC9BjD,KAAK8S,e,+DAWP,qGACqD9S,KAAK6B,MAAhD6Q,EADV,EACUA,YAAazP,EADvB,EACuBA,gBAAiBsP,EADxC,EACwCA,SAC9B1S,EAAoBG,KAApBH,IAAKoP,EAAejP,KAAfiP,aAETpP,GAAO0S,GAAYG,GAAezP,GAAmBgM,GAJ3D,iCAKuBA,EAAW8D,iBAAiBL,EAAazP,GALhE,UAKU8B,EALV,+DAOQ/E,KAAKgP,UAAUhP,KAAKgP,SAASS,OAPrC,UAQ0B5P,EAAIyN,MAAMoC,aARpC,QAQI1P,KAAKgP,SART,OASIhP,KAAKgC,SAAU,CACb+C,KAAM/E,KAAKgP,SAASW,aAAa3E,EAAkB,CACjDjG,KAAMA,EAAKqE,KAAI,SAAAjJ,GAAE,OAAIsE,EAAetE,EAAIoS,MACxC/J,QAAS,GACTF,OAAQ,IACRI,eAAgB,GAChBH,MAAO,YAGXvI,KAAKgP,SAASe,QAlBlB,iD,8HAwFC,iHACSlQ,EAAcG,KAAdH,IAAKmH,EAAShH,KAATgH,MAETnH,IAAOmH,EAHZ,qBAISgM,EAAQ,IAAIjM,EAAWC,IACnBiM,YALb,gCAMiCpT,EAAIoS,UAAUR,UAN/C,OAOK,IADMyB,EANX,OAOc9N,EAAE,EAAGA,EAAE8N,EAAc9Q,OAAQgD,IAAM,EACC8N,EAAc9N,GAAjDvC,EADiC,EACjCA,IAAKgP,EAD4B,EAC5BA,MAAOC,EADqB,EACrBA,YAAaqB,EADQ,EACRA,MADQ,EAEJH,EAAMI,UAAU,CAACvB,EAAOC,IAFpB,mBAEjCuB,EAFiC,KAEvBC,EAFuB,KAGzCzT,EAAIoS,UAAUsB,cAAc1Q,EAAK,CAC/BgP,MAAOwB,EACPvB,YAAawB,EACbH,UAbT,OAiBGH,EAAMQ,aAjBT,gD,0EAuBD,WAAiB,IAAD,EAUVxT,KAAK6B,MARP6Q,EAFY,EAEZA,YACAzP,EAHY,EAGZA,gBACAR,EAJY,EAIZA,UACAgO,EALY,EAKZA,YACAnB,EANY,EAMZA,eACAM,EAPY,EAOZA,KACA7K,EARY,EAQZA,KACAsL,EATY,EASZA,eAGF,OACE,sBAAK/P,UAAU,MAAf,UACE,sBAAKH,GAAG,kBAAR,UACE,cAAC,EAAD,CAAOD,IAAKF,KAAKE,MACjB,qBAAKC,GAAG,oBAAR,SAEI4E,IACAuK,EACA,cAAC,EAAD,CACEvB,QAASsC,EACTrC,OAAQhO,KAAKmQ,QACblC,QAASjO,KAAKsQ,SACdpC,OAAQlO,KAAKqP,cACblB,KAAMnO,KAAKuQ,QACXpF,EAAGyE,IAEH,cAAC,EAAD,CAAe1O,QAASlB,KAAKqP,uBAIlCoB,GACD,cAAC,EAAD,CAAYvP,QAASlB,KAAKwQ,aAE1BC,GACA,cAAC,EAAD,CACEiC,YAAaA,EACbzP,gBAAiBA,EACjBR,UAAWA,EACXC,WAAY1C,KAAK0C,WACjBM,SAAUhD,KAAKoP,eACfxL,QAAS5D,KAAKwQ,oB,GAnRO7P,aC5CjC8S,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFpU,SAASC,eAAe,W","file":"static/js/main.64cfbb29.chunk.js","sourcesContent":["import { MpSdk, ShowcaseEmbedWindow } from './sdk';\n\nconst SDK_VERSION = '3.2';\n\n/**\n * Gets a reference to the SDK. Use this if you want to do SDK stuff.\n * @param {string | HTMLIFrameElement} elementId ID of the iframe or the iframe element itself\n * @param {string} applicationKey Your API key \n * @returns Promise of MpSdk reference\n */\nexport const GetSDK = function(elementId: string | HTMLIFrameElement, applicationKey: string): Promise<MpSdk> {\n  return new Promise(function(resolve, reject) {\n    const checkIframe = async function() {\n      let iframe = null;\n      if (elementId instanceof HTMLIFrameElement) {\n        iframe = elementId as HTMLIFrameElement;\n      }\n      else {\n        iframe = document.getElementById(elementId) as HTMLIFrameElement;\n      }\n\n      if (iframe) {\n        // sometimes this is undefined for some reason, so check for it\n        const sdkWindow = (await iframe.contentWindow as ShowcaseEmbedWindow).MP_SDK;\n        if (sdkWindow) {\n          clearInterval(intervalId);\n          const sdk = sdkWindow.connect(iframe, applicationKey, SDK_VERSION);\n          resolve(sdk);\n        }\n      }\n    };\n    const intervalId = setInterval(checkIframe, 100);\n  });\n}\n","import React, { Component } from 'react';\nimport './Frame.scss';\n\ninterface Props {\n  src: string;\n  id?: string;\n  customRef?: React.RefObject<HTMLIFrameElement>\n}\n\n/**\n * This component houses the actual Matterport IFrame element. Doesn't do anything else.\n */\nexport default class Frame extends Component<Props, {}> {\n\n  render() {\n    const { src, id, customRef, children } = this.props;\n\n    return (\n      <div className='frame'>\n        <iframe\n          id={id || 'showcase'}\n          className='frame'\n          src={src}\n          title={'showcase'}\n          allowFullScreen={true}\n          frameBorder='0'\n          ref={customRef}\n        />\n        {children}\n      </div>\n    );\n  }\n}\n","import { Component } from 'react';\nimport './Accordion.scss';\n\ninterface AccordionProps {\n  header?: string\n}\n\nexport default class Accordion extends Component<AccordionProps> {\n\n  public render() {\n    const { header, children } = this.props;\n\n    return (\n      <div className='accordion'>\n        { header &&\n          <div className='accordion-header header-font'>{header}</div>\n        }\n        <div className='accordion-groups'>\n          {children}\n        </div>\n      </div>\n    );\n  }\n}","import classNames from 'classnames';\nimport { Component } from 'react';\nimport './AccordionItem.scss';\n\ninterface AccordionItemProps {\n  header?: string;\n  body?: string;\n  selected?: boolean;\n  onClick?: (e: any) => void;\n}\n\nexport const ACCORDION_ITEM_HEIGHT = '52px';\n\nexport default class AccordionItem extends Component<AccordionItemProps> {\n  public render() {\n    const { header, body, selected, onClick } = this.props;\n    return (\n      <div\n        className={classNames('accordion-item', {'selected': !!selected})}\n        onClick={onClick}\n        style={{ height: ACCORDION_ITEM_HEIGHT }}\n      >\n        <div className='accordion-item-details'>\n          <div className='accordion-item-header'>{header}</div>\n          <div className='accordion-item-body'>{body}</div>\n        </div>\n      </div>\n    );\n  }\n}","import { Component } from 'react';\nimport './Icon.scss';\nimport classNames from 'classnames';\n\ninterface IconProps {\n  icon: string;\n  classes?: string | string[];\n}\n\nexport default class Icon extends Component<IconProps> {\n  public render() {\n    const { icon, classes } = this.props;\n    let classArray: string[] = [];\n    if (classes) {\n      if (Array.isArray(classes)) {\n        classArray = classes;\n      } else {\n        classArray = [classes];\n      }\n    }\n\n    return (\n      <span className={classNames('icon', 'icon-' + icon, ...classArray)} />\n    );\n  }\n}","import { Component } from 'react';\nimport classNames from 'classnames';\nimport './AccordionGroup.scss';\nimport { ACCORDION_ITEM_HEIGHT } from './AccordionItem';\nimport Icon from '../icon/Icon';\n\ninterface AccordionGroupProps {\n  header?: string;\n  expanded?: boolean;\n  showNumber?: boolean;\n}\n\ninterface AccordionGroupState {\n  expanded: boolean;\n  showChildren: boolean;\n}\n\nexport default class AccordionGroup extends Component<AccordionGroupProps, AccordionGroupState> {\n  constructor(props: any) {\n    super(props);\n    const { expanded } = this.props;\n    this.state = {\n      expanded: !!expanded,\n      showChildren: !!expanded,\n    };\n  }\n\n  private onClick = () => {\n    const { expanded, showChildren } = this.state;\n    this.setState({\n      expanded: !expanded,\n    }, () => setTimeout(() => this.setState({showChildren: !showChildren}), showChildren ? 250 : 0));\n  }\n  \n  public render() {\n    const { children, header, showNumber } = this.props;\n    const { expanded } = this.state;\n\n    let numChildren = 0;\n    if (children) {\n      if (Array.isArray(children)) {\n        numChildren = children.length;\n      } else {\n        numChildren =  1; // one child fails isArray check\n      }\n    }\n    const hasChildren = numChildren > 0;\n    const contentHeight = expanded && hasChildren ? `calc(${numChildren}*${ACCORDION_ITEM_HEIGHT})` : '0';\n\n    return (\n      <div className={classNames('accordion-group-container', {'collapsed': !expanded})}>\n        <div\n          className='accordion-group-header header-font'\n          onClick={this.onClick}\n        >\n          {'' + header + (hasChildren && showNumber ? ` (${numChildren})` : '')}\n          <Icon icon='chevron-down' />\n        </div>\n        <div\n          className={classNames('accordion-group', {\n            'collapsed': !expanded,\n          })}\n          style={{ height: contentHeight }}\n        >\n          {numChildren > 0 && children}\n        </div>\n      </div>\n    );\n  }\n}","import { Component } from 'react';\nimport { Sweep } from '../../mp/sdk';\nimport './Menu.scss';\nimport Accordion from '../reusables/accordion/Accordion';\nimport AccordionGroup from '../reusables/accordion/AccordionGroup';\nimport AccordionItem from '../reusables/accordion/AccordionItem';\nimport { SweepAlias } from '../sweepAliases';\nimport Icon from '../reusables/icon/Icon';\n\ninterface MenuProps {\n  currSweepId?: string;\n  selectedSweepId?: string;\n  sweepData: Sweep.SweepData[];\n  sweepAlias?: SweepAlias;\n  onChange: (e: any) => void;\n  onClose?: () => void;\n}\n\ninterface MenuState {\n  sweepGroups: SweepGroups;\n}\n\ninterface SweepGroups {\n  [group: string]: Sweep.SweepData[];\n}\n\n/**\n * Component for UI elements like sweep selector, location info, etc.\n */\nexport default class Menu extends Component<MenuProps, MenuState> {\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      sweepGroups: {},\n    };\n  }\n\n  private getGroups() {\n    const { sweepData, sweepAlias } = this.props;\n    const groups: SweepGroups = {};\n    for (const s of sweepData) {\n      if (sweepAlias && !(s.sid in sweepAlias)) continue; // skip sweeps without alias, if available\n      const floor = '' + s.floor;\n      if (!(floor in groups)) {\n        groups[floor] = [];\n      }\n      groups[floor].push(s);\n    }\n    return groups;\n  }\n\n  private renderItem(s: Sweep.SweepData) {\n    const { onChange, selectedSweepId, sweepAlias } = this.props;\n    const { sid } = s;\n    const name = sweepAlias ? sweepAlias[sid] : sid; // replace sid with alias, if available\n    return (\n      <AccordionItem\n        header={name}\n        onClick={() => onChange(sid)}\n        selected={sid === selectedSweepId}\n        key={sid}\n      />\n    );\n  }\n\n  /**\n   * Renders sweeps grouped by floors.\n   * @returns List of `<AccordionGroup>` with items inside.\n   */\n  private renderGroups() {\n    const { selectedSweepId } = this.props;\n    const sweepGroups = this.getGroups();\n    const floors: any = [];\n    let selectedFloor = undefined;\n\n    for (const [floor, sweeps] of Object.entries(sweepGroups)) {\n      if (!(floor in floors)) floors[floor] = [];\n      \n      const items = []\n      for (const s of sweeps) {\n        items.push(this.renderItem(s));\n        if (s.sid === selectedSweepId) {\n          selectedFloor = s.floor;\n        }\n      }\n\n      floors.push(\n        <AccordionGroup\n          header={`Floor ${floor}`}\n          expanded={!!selectedFloor && ''+selectedFloor === floor}\n          showNumber={true}\n          key={floor}\n        >\n          {items}\n        </AccordionGroup>\n      );\n    }\n    return floors;\n  }\n  \n  public render() {\n    const { onClose } = this.props;\n    return (\n      <div className='menu'>\n        <div className='menu-header'>\n          <div className='menu-header-text header-font'>Sweeps</div>\n          { onClose &&\n            <button type='button' className='menu-close-button' onClick={onClose}>\n              <Icon icon='close' />\n            </button>\n          }\n        </div>\n        <Accordion>\n          {this.renderGroups()}\n        </Accordion>\n      </div>\n    );\n  }\n}","import classNames from 'classnames';\nimport { Component } from 'react';\nimport Icon from '../reusables/icon/Icon';\nimport './MenuButton.scss';\n\ninterface MenuButtonProps {\n  text?: string;\n  onClick: () => void;\n}\n\nexport default class MenuButton extends Component<MenuButtonProps> {\n  \n  public render() {\n    const { text, onClick } = this.props;\n    return (\n      <div className='menu-button-container'>\n        <button type='button' className={classNames('menu-button', {'text-button': !!text})} onClick={onClick}>\n          {text ? text : \n            <Icon icon='chevron-left' />\n          }\n        </button>\n      </div>\n    );\n  }\n}","import { Dictionary, MpSdk, Vector3 } from \"../mp/sdk\";\n\n/**\n * This module is for general helper interfaces, types, and methods.\n */\n\n/**\n * Euclidean distance between two points.\n * @param {Vector3} p1 \n * @param {Vector3} p2 \n * @returns {number}\n */\nexport function distance(p1: Vector3, p2: Vector3): number {\n  return Math.sqrt((p1.x - p2.x)**2 + (p1.y - p2.y)**2 + (p1.z - p2.z)**2);\n}\n\nexport function sweepIdToPoint(id: string, sweepData: Dictionary<MpSdk.Sweep.ObservableSweepData>): Vector3 {\n  return sweepData[id].position;\n}\n\nexport {};","import { Sweep, Vector3 } from '../mp/sdk';\nimport { distance } from './utils';\n\n/**\n * Path given by `findShortestPath` as list of sweep ids. It's a separate type\n * just in case the return type changes.\n */\nexport type SweepPath = string[];\n\n/**\n * Graph as adjacency list, with sweep ids mapping to a list of neighboring ids,\n * who each map to corresponding distances.\n */\ninterface SweepGraph {\n  [a_id: string]: AdjacencyNode;\n}\ninterface AdjacencyNode {\n  [b_id: string]: number;\n}\n\nexport interface SweepPositions {\n  [id: string]: Vector3;\n}\n\nexport default class Pathfinder {\n\n  private VERT_THRESHOLD = 0.5; // penalize sweeps vertically separated by this distance, in meters\n  private HORZ_THRESHOLD = 10.0; // penalize sweeps horizontally separated by this distance, in meters\n\n  private graph: SweepGraph = {};\n  public path: SweepPath = [];\n\n  private sweepPositions: SweepPositions = {};\n\n  constructor(sweepData: Sweep.SweepData[]) {\n    // init sweepPositions\n    sweepData.forEach(sweep => this.sweepPositions[sweep.sid] = sweep.position);\n    this.createGraph(sweepData);\n  }\n\n  /**\n   * Generate graph of sweep distances.\n   * @param {Sweep.SweepData[]} sweeps List of sweep data, such as `sdk.Model.getData().sweeps`\n   */\n  private createGraph(sweeps: Sweep.SweepData[]): void {\n    const graph: SweepGraph = {};\n    for (let i = 0; i < sweeps.length; i++) {\n      const sweep_a = sweeps[i];\n      const adj: AdjacencyNode = {};\n      const neighbor_sids = sweep_a.neighbors;\n      for (let j = 0; j < neighbor_sids.length; j++) {\n        const sweep_b_sid = neighbor_sids[j];\n        const d = distance(sweep_a.position, this.sweepPositions[sweep_b_sid]);\n        adj[sweep_b_sid] = d;\n      }\n      graph[sweep_a.sid] = adj;\n    }\n    this.graph = graph;\n  }\n\n  /**\n   * Heuristic function for A*. Just take Euclidean distance.\n   */\n  private heuristic(i_sid: string, j_sid: string): number {\n    const { sweepPositions } = this;\n    return distance(sweepPositions[i_sid], sweepPositions[j_sid]);\n  }\n\n  /**\n   * Additional penalty to avoid large vertical/horizontal jumps.\n   */\n  private penalty(i_sid: string, j_sid: string): number {\n    const { sweepPositions } = this;\n    return ((sweepPositions[i_sid].y - sweepPositions[j_sid].y) / this.VERT_THRESHOLD) ** 4\n      + (((sweepPositions[i_sid].x - sweepPositions[j_sid].x) ** 2 + (sweepPositions[i_sid].z - sweepPositions[j_sid].z) ** 2) / this.HORZ_THRESHOLD);\n  }\n\n  /**\n   * Find shortest path between two sweeps connected by valid movements.\n   * @param {string} a_sid SID of starting sweep.\n   * @param {string} b_sid SID of ending sweep.\n   * @returns {SweepPath} Path from `a_sid` to `b_sid`.\n   */\n  public async findShortestPath(a_sid: string, b_sid: string): Promise<SweepPath | undefined> {\n\n    const { graph } = this;\n\n    // check SIDs are valid\n    if (graph[a_sid] === undefined || graph[b_sid] === undefined) {\n      console.error('Sweep SID(s) is invalid.');\n      return;\n    }\n\n    const ht: any = {}; // hash table that stores the following info for each encountered sweep:\n    ht[a_sid] = { visited: false, distance: 0, cost: 0, parent: null };\n\n    // loop A* algorithm\n    let debug_n = 0; // count number of iterations\n\n    while (true) {\n      debug_n += 1;\n      // find unvisited sweep with minimum cost = distance + heuristic\n      // TODO: optimize with priority queue\n      let min_sid;\n      const encountered_sids = Object.keys(ht);\n      for (let i = 0; i < encountered_sids.length; i++) {\n        const sid = encountered_sids[i];\n        if (!ht[sid].visited && (min_sid === undefined || ht[sid].cost < ht[min_sid].cost)) {\n          min_sid = sid;\n        }\n      }\n      if (min_sid === undefined) {\n        console.error('Could not find path; sweeps are not connected.');\n        return;\n      }\n      // check if sweep is ending point\n      if (min_sid === b_sid) {\n        break;\n      }\n      // add all neighbors of `min_sid`\n      ht[min_sid].visited = true;\n      const neighbor_sids = Object.keys(graph[min_sid]);\n      for (let i = 0; i < neighbor_sids.length; i++) {\n        const sid = neighbor_sids[i];\n        const dist = ht[min_sid].distance + graph[min_sid][sid];\n        const cost = dist + this.penalty(min_sid, sid) + this.heuristic(sid, b_sid);\n        if (sid in ht) { // if sweep has been encountered\n          if (!ht[sid].visited && (ht[sid].cost > cost)) { // if not visited and smaller cost, then update\n            ht[sid].parent = min_sid;\n            ht[sid].distance = dist;\n            ht[sid].cost = cost;\n          }\n        } else { // if sweep has not been encountered yet\n          ht[sid] = { visited: false, distance: dist, cost: cost, parent: min_sid };\n        }\n      }\n    }\n    console.log(`Pathfind iterations: ${debug_n}`);\n\n    // traverse graph back to starting point\n    let sid = b_sid;\n    const path: string[] = [sid];\n    while (ht[sid].parent !== null) {\n      sid = ht[sid].parent as string;\n      path.push(sid);\n    }\n    path.reverse();\n    return path;\n\n  }\n}","export default class Translator {\n\n  private xhr: XMLHttpRequest;\n  private url: string = \"https://api-free.deepl.com/v2/translate\";\n  private key: string = \"1fa4cd0a-7872-2cc0-e6e3-e96c6587ca62:fx\";\n\n  constructor(lang: string) {\n    this.xhr = new XMLHttpRequest();\n    this.url += `?auth_key=${this.key}&target_lang=${lang}`;\n  }\n\n  public testQuery(): boolean {\n    const { xhr } = this;\n\n    let query = this.url + `&text=`;\n    xhr.open(\"GET\", query, false); \n    xhr.send(); // synchronous request\n    let status = xhr.status;\n    if (status === 0 || (status >= 200 && status < 400)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  public checkUsage(): void {\n    const { xhr } = this;\n    xhr.open(\"GET\", `https://api-free.deepl.com/v2/usage?auth_key=${this.key}`, false);\n    xhr.send(); // synchronous request\n    console.log(\"DeepL Usage\", xhr.responseText);\n  }\n\n  public translate(texts: string[]): string[] {\n    const { xhr } = this;\n\n    let query = this.url;\n    for (let i=0; i<texts.length; i++) {\n      query += `&text=${texts[i]}`;\n    }\n    xhr.open(\"GET\", query, false); \n    xhr.send(); // synchronous request\n    let status = xhr.status;\n    if (status === 0 || (status >= 200 && status < 400)) {\n      const json = xhr.responseText;\n      return this.parse(json);\n    } else {\n      return texts;\n    }\n  }\n\n  /**\n   * Parse the JSON received from DeepL\n   */\n  private parse(raw: string): string[] {\n    const obj = JSON.parse(raw);\n    const transTexts = [];\n    for (let i=0; i<obj.translations.length; i++) {\n      transTexts.push(obj.translations[i].text);\n    }\n    return transTexts;\n  }\n\n}\n","import { Color, Vector3 } from '../../mp/sdk';\nimport { distance } from '../utils';\n\ninterface PathRendererInputs {\n  visible: boolean;\n  path: Vector3[];\n  radius: number;\n  color: Color | number;\n  opacity: number;\n  heightOffset: number;\n  stepMultiplier: number;\n}\n\ninterface PathRendererOutputs {\n  objectRoot: any;\n  curve: any;\n  distance: number;\n}\n\nclass PathRenderer {\n\n  private material: any;\n\n  private inputs: PathRendererInputs = {\n    visible: false,\n    path: [], // positions on path\n    radius: 0.15,\n    color: 0x00ff00,\n    opacity: 0.5,\n    heightOffset: -1.1,\n    stepMultiplier: 5,\n  };\n\n  private context: any;\n\n  private outputs = {\n    curve: null,\n    distance: 0,\n  } as PathRendererOutputs;\n\n  public onInit = async () => {\n\n    const THREE = this.context.three;\n\n    const { path,\n            radius,\n            heightOffset,\n            opacity,\n            color,\n            stepMultiplier } = this.inputs;\n\n    // check if path is long enough and no undefined points\n    if (path.length < 2 || !path.every(p => !!p)) return;\n    \n    let d = 0;\n    const points = path.map((p, i) => {\n      if (i > 0) {\n        d += distance(path[i-1], p);\n      }\n      return new THREE.Vector3(p.x, p.y+heightOffset, p.z);\n    });\n    const spline = new THREE.CatmullRomCurve3(points);\n\n    const extrudeSettings = {\n        steps: stepMultiplier * path.length,\n        bevelEnabled: false,\n        extrudePath: spline,\n    };\n\n    // Shape to extrude\n    const arcShape = new THREE.Shape().absarc(0, 0, radius, 0, Math.PI * 2, false);\n    \n    const extrudeGeometry = new THREE.ExtrudeGeometry( arcShape, extrudeSettings );\n    \n    this.material = new THREE.MeshBasicMaterial({\n        color: color as number,\n        transparent: true,\n        opacity: opacity,\n    });\n\n    const pathMesh = new THREE.Mesh(extrudeGeometry, this.material);\n\n    this.outputs.objectRoot = pathMesh;\n    this.outputs.curve = spline;\n    this.outputs.distance = d;\n  };\n\n  public onEvent = function(_type: any, _data: any) {\n  }\n\n  public onInputsUpdated = function(_previous: any) {\n  };\n\n  public onTick = function(_tickDelta: any) {\n  };\n\n  public onDestroy = () => {\n    this.material?.dispose();\n  };\n}\n\nexport const pathRendererType = 'sdk-component.pathRenderer';\nexport function PathRendererFactory() {\n  return new PathRenderer();\n}","import { Vector3 } from '../../mp/sdk';\n\ntype Euler = {\n\tx: number;\n\ty: number;\n\tz: number;\n  order: string;\n};\n\ninterface CameraControllerInputs {\n  curve: any, \n  speed: number, \n  verticalOffset: number, \n  enabled: boolean, \n  changeUCallback: (u: number) => void, \n}\n\ninterface CameraControllerOutputs {\n  camera: any,\n}\n\nclass CameraController {\n\n  private u: number = 0; // number in [0, 1] representing position along curve\n  private length: number = 0; // length of curve\n  private up: undefined | Vector3;\n  private timeReference: number = Date.now(); // keep track of time and u when pausing/resuming\n  private uReference: number = 0;\n\n  private inputs: CameraControllerInputs = {\n    curve: null, // THREE.Curve object\n    speed: 1.5, // speed in meters per second\n    verticalOffset: 1., // vertical offset from curve\n    enabled: false, // true to move forward automatically, false to pause\n    changeUCallback: (u) => null, // callback eahc time u changes\n  };\n\n  private outputs = {\n    camera: null,\n  } as CameraControllerOutputs;\n\n  private context: any;\n\n  /**\n   * Given u along curve, return position and rotation for camera.\n   */\n  private getPoseAt(u: number): {position: Vector3, rotation: Euler} {\n    const { curve, speed, verticalOffset } = this.inputs;\n    const THREE = this.context.three;\n    // position\n    const uPast = Math.max(u - 0.1 * speed / this.length, 0); // 0.1 second in past\n    const uFuture = Math.min(u + speed / this.length, 1); // 1 second in the future\n    const position = curve.getPointAt(u);\n    position.y += verticalOffset; // add vertical offset;\n    const positionPast = curve.getPointAt(uPast);\n    const positionFuture = curve.getPointAt(uFuture);\n    // rotation\n    const matrix = new THREE.Matrix4().lookAt(positionPast, positionFuture, this.up);\n    const rotation = new THREE.Euler().setFromRotationMatrix(matrix, \"YXZ\");\n    return { position, rotation };\n  }\n\n  /**\n   * Set camera pose.\n   */\n  private setCamera(position: Vector3, rotation: Euler) {\n    const { camera } = this.outputs;\n    camera.position.copy(position);\n    camera.rotation.copy(rotation);\n    camera.updateProjectionMatrix();\n  }\n\n  /**\n   * Manually set u for camera.\n   */\n  public setU(u: number) {\n    const { position, rotation } = this.getPoseAt(u);\n    this.setCamera(position, rotation);\n    this.inputs.changeUCallback(u);\n    this.uReference = u;\n  }\n\n  // --- IComponent methods ----------------------------------------------------\n\n  public onInit = async () => {\n    const { curve } = this.inputs;\n    const THREE = this.context.three;\n\n    const camera = new THREE.PerspectiveCamera( 45, 1.333, 1, 1000 );\n    this.outputs.camera = camera;\n    this.length = curve.getLength() - 1;\n    this.up = new THREE.Vector3(0, 1, 0);\n  };\n\n  public onEvent = function(_type: any, _data: any) {\n  };\n\n  public onInputsUpdated = (_previous: any) => {\n    const { enabled } = this.inputs;\n    if (enabled) {\n      this.timeReference = Date.now() // when resuming, update reference time\n    } else {\n      this.uReference = this.u; // when pausing, update reference u\n    }\n  };\n\n  public onTick = async (_tickDelta: any) => {\n    const { speed, enabled } = this.inputs;\n    if (enabled) {\n      const deltaTime = (Date.now() - this.timeReference)/1000;\n      let u = this.uReference + speed * deltaTime / this.length; \n      u = Math.min(Math.max(u, 0), 1); // clamp u into [0, 1]\n      const { position, rotation } = this.getPoseAt(u);\n      this.setCamera(position, rotation);\n      this.inputs.changeUCallback(u);\n      this.u = u;\n    }\n  };\n\n  public onDestroy = function() {\n  };\n}\n\nexport const cameraControllerType = 'sdk-component.cameraController';\nexport function CameraControllerFactory() {\n  return new CameraController();\n}\n","import { MpSdk } from \"../../mp/sdk\";\nimport { PathRendererFactory, pathRendererType } from \"./PathRenderer\";\nimport { CameraControllerFactory, cameraControllerType } from \"./CameraController\";\n\n/**\n * Registers all SDK Scene components.\n * @param {MpSdk} sdk\n */\n\nexport const initComponents = async (sdk: MpSdk | any) => {\n  await Promise.all([\n    sdk.Scene.register(pathRendererType, PathRendererFactory),\n    sdk.Scene.register(cameraControllerType, CameraControllerFactory),\n  ]);\n}","\nexport interface SweepAlias {\n  [sid: string]: string;\n}\n\nconst robinsonHall: SweepAlias = {\n  \"36642185cf3f481897967d749003d683\": \"Great Hall\",\n  \"e282bc9e7ae94a58aa624c4679e71946\": \"105\",\n  \"03dbddfa78074195ad605033e1a5ea88\": \"106\",\n  \"ecf49427817f4ad2a18971bd836f577a\": \"107\",\n  \"233c8a90b0d44803b451cc18c2beb2ac\": \"125: History Department Conference Room\",\n  \"7f3f51d4c0b9448f9e5c78a9882fe912\": \"222\",\n  \"5c19c240375d4d04a6c9ca790a35fa02\": \"223\",\n  \"c2096fe91b2543f78ca9d95070e78e63\": \"225: History Department Graduate Lounge\",\n  \"1b11bb808949421ba32142f4c48b9823\": \"B21: Warren Center Conference Room\",\n};\n\nexport const sweepAliases: any = {\n  \"GycExKiYVFp\": robinsonHall,\n}\n","import { Component } from 'react';\nimport './ScrubBar.scss';\n\ninterface ScrubBarProps {\n  onMouseDown: () => void,\n  onMouseUp: () => void,\n  onChange: (e: any) => void,\n  u: any,\n}\n\ninterface ScrubBarState {\n}\n\nexport default class ScrubBar extends Component<ScrubBarProps, ScrubBarState> {\n\n  public render() {\n\n    const { onMouseDown, onMouseUp, onChange, u } = this.props;\n  \n    //const path = process.env.PUBLIC_URL + '/icons/')\n\n    return (\n      <div className='scrub-div'>\n        <input className='scrub-bar' type='range' min='0' max='1' step='0.001' value={u}\n          onMouseDown={onMouseDown} \n          onMouseUp={onMouseUp} \n          onChange={onChange}\n        />\n      </div>\n    );\n  }\n}","import { Component } from 'react';\nimport Icon from '../../reusables/icon/Icon';\nimport ScrubBar from './ScrubBar';\nimport './ControlsOverlay.scss';\n\ninterface ControlsOverlayProps {\n  playing: boolean;\n  onPlay: () => void;\n  onPause: () => void;\n  onExit: () => void;\n  setU: (u: number) => void;\n  u: number;\n}\n\nexport default class ControlsOverlay extends Component<ControlsOverlayProps> {\n\n  public render() {\n    const { playing, onPlay, onPause, onExit, setU, u } = this.props;\n\n    return (\n      <div className='controls-overlay-container'>\n        <div className='controls-overlay'>\n          <ScrubBar \n            onMouseDown={onPause}\n            onMouseUp={onPlay}\n            onChange={(e) => setU(parseFloat(e.target.value))}\n            u={u}\n          />\n          <div className='control-button-container'>\n            <button type='button'\n              className='control-button play-button'\n              onClick={playing ? onPause : onPlay}\n            >\n              <Icon icon={playing ? 'showcase-pause-lg' : 'showcase-play-lg'} classes='play-pause-button' />\n            </button>\n            <button type='button' className='control-button exit-button' onClick={onExit}>\n              <Icon icon='close' />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n\n  }\n}","import { Component } from 'react';\nimport './FlyModeButton.scss';\n\ninterface FlyModeButtonProps {\n  onClick: () => void;\n}\n\nexport default class FlyModeButton extends Component<FlyModeButtonProps> {\n  public render() {\n    const { onClick } = this.props;\n    return (\n      <div className='flymode-button-container'>\n        <button className='flymode-button' onClick={onClick}>Fly Mode</button>\n      </div>\n    );\n  }\n}","import React, { Component } from 'react';\nimport { GetSDK } from '../mp/GetSDK';\nimport { Dictionary, MpSdk, Sweep } from '../mp/sdk';\nimport './App.scss';\nimport Frame from './Frame';\nimport Menu from './ui/Menu';\nimport MenuButton from './ui/MenuButton';\nimport Pathfinder from './Pathfinder';\nimport Translator from './Translator';\nimport { initComponents } from './sdk-components';\nimport { pathRendererType } from './sdk-components/PathRenderer';\nimport { cameraControllerType } from './sdk-components/CameraController';\nimport { sweepIdToPoint } from './utils';\nimport { SweepAlias, sweepAliases } from './sweepAliases';\nimport ControlsOverlay from './ui/overlay/ControlsOverlay';\nimport FlyModeButton from './ui/overlay/FlyModeButton';\n\nexport interface Sdk extends MpSdk {\n  Scene?: any;\n}\n\ninterface AppState {\n  currSweepId?: string;\n  selectedSweepId?: string;\n  sweepData: Sweep.SweepData[]; // put in state because changes should trigger rerender\n  sweepMap?: Dictionary<MpSdk.Sweep.ObservableSweepData>;\n  path?: any; // put in state so path visibility updates trigger rerender\n  menuEnabled: boolean;\n  flyModeEnabled: boolean;\n  flyU: number; // integer in [0, 1] indicating position in flythrough\n  flyModePlaying: boolean;\n}\n\nconst defaultUrlParams: any = {\n  m: 'GycExKiYVFp',\n  applicationKey: 'q44m20q8yk81yi0qgixrremda',\n  title: '0',\n  qs: '1',\n  hr: '0',\n  brand: '0',\n  help: '0',\n  play: '1',\n}\n\n/**\n * This is the top level class for the app. It handles API key, model ID, and url stuff,\n * and holds references to objects/modules/components for object composition.\n * Do non-initializing SDK and UI stuff in other components/files.\n */\nexport default class App extends Component<{}, AppState> {\n\n  private src: string; // the url source for the sdk\n  private lang: string | null = null;\n  private sdk?: Sdk;\n\n  private pathNode: any; // the node for the PathRenderer component\n  private pathfinder?: Pathfinder;\n\n  private sweepAlias?: SweepAlias; // human-readable alias for sweeps, if available\n\n  private flyNode: any; // the node for the CameraController component\n  private camCon: any; // CameraConroller component\n\n  constructor(props: any) {\n    super(props);\n    const queryString = this.handleUrlParams();\n    this.src = `${process.env.PUBLIC_URL}/bundle/showcase.html?${queryString}`;\n\n    this.state = {\n      sweepData: [],\n      menuEnabled: true,\n      flyModeEnabled: false,\n      flyU: 0,\n      flyModePlaying: false,\n    };\n  }\n\n  /**\n   * Parses the current url params and combines them with the default params, updating when necessary.\n   * @returns url param query string (without `?`), ready to be pasted directly into the url\n   */\n  private handleUrlParams(): string {\n    const params = new URLSearchParams(window.location.search);\n    this.lang = params.get('lang');\n    for (const [k, v] of Object.entries(defaultUrlParams)) {\n      if (!params.has(k)) {\n        params.append(k, ''+v); // convert v to string\n      }\n    }\n    return params.toString();\n  }\n\n  // --- React methods ---------------------------------------------------------\n\n  public async componentDidMount() {\n    \n    this.sdk = await GetSDK('showcase', defaultUrlParams.applicationKey);\n    await initComponents(this.sdk);\n\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // Add user-generated Mattertags to the default model\n    // In production, this block will be removed\n    await this.sdk.Model.getData().then( async (data) => {\n      if (data.sid === 'GycExKiYVFp') {\n        const mattertags = [];\n        mattertags.push(\n          {\n            label: \"Revitalizing the Great Hall\",\n            description: \"Within the buildings Great Hall, new vestibule spaces were created to \"+\n              \"connect the main circulation corridor to new restrooms. Elevator lobbies and \"+\n              \"office suite entrances were treated as extensions of the original McKim design, \"+\n              \"with matching marble flooring and wall base, and stained oak millwork-encased \"+\n              \"openings. The installation of fire sprinklers throughout the building helped call \"+\n              \"attention to new opportunities for restoring spatial clarity; obsolete steel and \"+\n              \"wired glass partitions installed in the main corridor in the 1970s were removed, \"+\n              \"opening up the axial hallway to its original extents and further enhancing spatial \"+\n              \"connectivity.\",\n            anchorPosition: {x: 16.55, y: 1.28-1.5, z: 6.69},\n            stemVector: { x: 0, y: 1, z: 0 },\n          }\n        );\n        await this.sdk?.Mattertag.add(mattertags);\n      }\n    });\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n    this.sdk.Model.getData().then( (data) => {\n      const sweepData = data.sweeps;\n      this.pathfinder = new Pathfinder(sweepData);\n      this.setState({\n        sweepData: sweepData,\n      });\n      this.sweepAlias = sweepAliases[data.sid];\n    });\n\n    this.sdk.Sweep.data.subscribe({\n      onCollectionUpdated: (collection: Dictionary<MpSdk.Sweep.ObservableSweepData>) => {\n        this.setState({\n          sweepMap: collection\n        });\n      },\n    });\n\n    this.sdk.Sweep.current.subscribe((currentSweep: any) => {\n      if (currentSweep.sid) console.log(currentSweep.sid, currentSweep.position);\n      this.setState({\n        currSweepId: currentSweep.sid,\n      });\n    });\n\n    // translate all mattertags\n    this.translateMattertags();\n  }\n\n  public componentDidUpdate(_prevProps: any, prevState: AppState) {\n    const { currSweepId, selectedSweepId } = this.state;\n\n    // only update path if sweep state changes\n    (currSweepId !== prevState.currSweepId ||\n    selectedSweepId !== prevState.selectedSweepId) &&\n    this.handlePath();\n  }\n\n  // --- SDK methods -----------------------------------------------------------\n\n  private onOptionSelect = (id: string) => {\n    this.setState({\n      selectedSweepId: id,\n    });\n  }\n\n  private async handlePath() {\n    const { currSweepId, selectedSweepId, sweepMap } = this.state;\n    const { sdk, pathfinder } = this;\n\n    if (sdk && sweepMap && currSweepId && selectedSweepId && pathfinder) {\n      const path = await pathfinder.findShortestPath(currSweepId, selectedSweepId);\n      if (!path) return;\n      if (this.pathNode) this.pathNode.stop();\n      this.pathNode = await sdk.Scene.createNode();\n      this.setState ({\n        path: this.pathNode.addComponent(pathRendererType, {\n          path: path.map(id => sweepIdToPoint(id, sweepMap)),\n          opacity: 0.7,\n          radius: 0.12,\n          stepMultiplier: 10,\n          color: 0x8df763,\n        })\n      });\n      this.pathNode.start();\n    }\n  }\n\n  private toggleFlyMode = async () => {\n    const { flyModeEnabled } = this.state;\n    if (flyModeEnabled) {\n      await this.exitFly();\n    } else {\n      await this.initFly();\n    }\n    this.setState({flyModeEnabled: !flyModeEnabled});\n  };\n\n  private initFly = async () => {\n    const { sdk } = this;\n    const { path } = this.state;\n\n    if (sdk && path) {\n      if (this.flyNode) this.flyNode.stop();\n      this.flyNode = await sdk.Scene.createNode();\n      this.camCon = this.flyNode.addComponent(cameraControllerType, {\n        changeUCallback: (u: number) => this.setState({flyU: u}),\n      });\n      const cam = this.flyNode.addComponent('mp.camera', {\n        enabled: true,\n      });\n      this.camCon.bind('curve', path, 'curve');\n      cam.bind('camera', this.camCon, 'camera');\n      this.flyNode.start();\n\n      // orient camera to start of flythrough\n      const { position, rotation } = this.camCon.getPoseAt(0);\n      await sdk.Mode.moveTo(sdk.Mode.Mode.DOLLHOUSE, {\n        position,\n        rotation: {x: rotation.x*180/Math.PI, y: rotation.y*180/Math.PI},\n      });\n\n      // start flythough\n      this.setState({flyU: 0});\n      this.playFly();\n    }\n  };\n\n  private exitFly = async () => {\n    const { sdk, flyNode } = this;\n    if (flyNode) flyNode.stop();\n    if (sdk) sdk.Mode.moveTo(sdk.Mode.Mode.INSIDE);\n    this.setState({ flyModePlaying: false, });\n  };\n\n  private playFly = () => {\n    if (this.camCon) this.camCon.inputs.enabled = true;\n    this.setState({ flyModePlaying: true, });\n  };\n  private pauseFly = () => {\n    if (this.camCon) this.camCon.inputs.enabled = false;\n    this.setState({ flyModePlaying: false, });\n  };\n  private setFlyU = (u: number) => {if (this.camCon) this.camCon.setU(u)};\n\n  private toggleMenu = () => {\n    this.setState({\n      menuEnabled: !this.state.menuEnabled,\n    });\n  }\n\n  /**\n   * TODO: make async to speed up\n   */\n   private async translateMattertags() {\n    const { sdk, lang } = this;\n\n    if (sdk && lang) {\n      const Trans = new Translator(lang);\n      if (Trans.testQuery()) { // check HTTP request works\n        const mattertagData = await sdk.Mattertag.getData();\n        for (let i=0; i<mattertagData.length; i++) {\n          const { sid, label, description, media } = mattertagData[i];\n          const [ newLabel, newDescription ] = Trans.translate([label, description]);\n          sdk.Mattertag.editBillboard(sid, {\n            label: newLabel, \n            description: newDescription, \n            media,\n          });\n        }\n      }\n      Trans.checkUsage();\n    }\n  }\n\n  // --- Render ----------------------------------------------------------------\n\n  public render() {\n    const {\n      currSweepId,\n      selectedSweepId,\n      sweepData,\n      menuEnabled,\n      flyModeEnabled,\n      flyU,\n      path,\n      flyModePlaying,\n    } = this.state;\n\n    return (\n      <div className='app'>\n        <div id='frame-container'>\n          <Frame src={this.src} />\n          <div id='overlay-container'>\n            {/* Put all showcase overlay components here */}\n            { path && (\n              flyModeEnabled ?\n              <ControlsOverlay\n                playing={flyModePlaying}\n                onPlay={this.playFly}\n                onPause={this.pauseFly}\n                onExit={this.toggleFlyMode}\n                setU={this.setFlyU}\n                u={flyU}\n              /> \n              : <FlyModeButton onClick={this.toggleFlyMode} />\n            )}\n          </div>\n        </div>\n        { !menuEnabled &&\n          <MenuButton onClick={this.toggleMenu} />\n        }\n        { menuEnabled &&\n          <Menu\n            currSweepId={currSweepId}\n            selectedSweepId={selectedSweepId}\n            sweepData={sweepData}\n            sweepAlias={this.sweepAlias}\n            onChange={this.onOptionSelect}\n            onClose={this.toggleMenu}\n          />\n        }\n        </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './app/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}